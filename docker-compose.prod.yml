# Production-specific overrides
# Production monitors and auto-restarts Staging
services:
  cross-monitor:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: cross-monitor
    restart: always
    environment:
      - MONITOR_TARGET_URL=http://94.130.228.55:8080/health
      - MONITOR_TARGET_HOST=94.130.228.55
      - MONITOR_TARGET_NAME=AbstractFinance-staging
      - MONITOR_INTERVAL=60
      - FAILURES_BEFORE_RESTART=3
      - RESTART_COOLDOWN=300
    volumes:
      - /root/.ssh:/root/.ssh:ro
    command: ["python", "-m", "scripts.cross_monitor"]
    networks:
      - trading-network
