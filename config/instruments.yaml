# AbstractFinance - Instrument Configuration
# All instruments must be IBKR-tradable
# Updated for EU PRIIPs/KID compliance - using UCITS ETFs on European exchanges

equity_indices:
  # US Index Instruments
  us_index_future:
    symbol: "ES"
    exchange: "CME"
    sec_type: "FUT"
    currency: "USD"
    multiplier: 50.0
    description: "E-mini S&P 500 Future"

  us_index_etf:
    symbol: "CSPX"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    multiplier: 1.0
    description: "iShares Core S&P 500 UCITS ETF (USD)"

  us_index_micro:
    symbol: "MES"
    exchange: "CME"
    sec_type: "FUT"
    currency: "USD"
    multiplier: 5.0
    description: "Micro E-mini S&P 500 Future"

  # EU Index Instruments
  eu_index_future:
    symbol: "FESX"
    exchange: "EUREX"
    sec_type: "FUT"
    currency: "EUR"
    multiplier: 10.0
    description: "Euro STOXX 50 Future"

  eu_index_etf:
    symbol: "EXS1"              # CS51 is LSE symbol; EXS1 is XETRA symbol
    exchange: "XETRA"
    sec_type: "STK"
    currency: "EUR"
    multiplier: 1.0
    description: "iShares Core Euro STOXX 50 UCITS ETF"

  eu_broad_etf:
    symbol: "SMEA"
    exchange: "LSE"
    sec_type: "STK"
    currency: "GBP"
    multiplier: 1.0
    description: "iShares Core MSCI Europe UCITS ETF"

fx:
  # EUR/USD Hedging
  eurusd_future:
    symbol: "6E"
    exchange: "CME"
    sec_type: "FUT"
    currency: "USD"
    multiplier: 125000.0
    description: "Euro FX Future"

  eurusd_micro:
    symbol: "M6E"
    exchange: "CME"
    sec_type: "FUT"
    currency: "USD"
    multiplier: 12500.0
    description: "Micro Euro FX Future"

  eurusd_spot:
    symbol: "EUR"
    exchange: "IDEALPRO"
    sec_type: "CASH"
    currency: "USD"
    multiplier: 1.0
    description: "EUR.USD Spot FX"

sectors_us:
  # Technology - UCITS compliant
  tech_xlk:
    symbol: "IUIT"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    description: "iShares S&P 500 IT Sector UCITS ETF"

  tech_qqq:
    symbol: "CNDX"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    description: "iShares NASDAQ 100 UCITS ETF"

  tech_igv:
    symbol: "WTCH"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    description: "WisdomTree Cloud Computing UCITS ETF"

  tech_smh:
    symbol: "SEMI"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    description: "VanEck Semiconductor UCITS ETF"

  # Healthcare - UCITS compliant
  health_xlv:
    symbol: "IUHC"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    description: "iShares S&P 500 Health Care Sector UCITS ETF"

  health_xbi:
    symbol: "SBIO"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    description: "Invesco NASDAQ Biotech UCITS ETF"

  health_ibb:
    symbol: "BTEK"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    description: "iShares Nasdaq US Biotechnology UCITS ETF"

  # Quality/Momentum Factors - UCITS compliant
  factor_qual:
    symbol: "IUQA"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    description: "iShares Edge MSCI USA Quality Factor UCITS ETF"

  factor_mtum:
    symbol: "IUMO"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    description: "iShares Edge MSCI USA Momentum Factor UCITS ETF"

sectors_eu:
  # European Financials - UCITS compliant
  financials_eufn:
    symbol: "EXV1"
    exchange: "XETRA"
    sec_type: "STK"
    currency: "EUR"
    description: "iShares STOXX Europe 600 Banks UCITS ETF"

  # Broad Europe - UCITS compliant
  broad_fez:
    symbol: "CS51"
    exchange: "XETRA"
    sec_type: "STK"
    currency: "EUR"
    description: "iShares Core Euro STOXX 50 UCITS ETF"

  broad_ieur:
    symbol: "SMEA"
    exchange: "LSE"
    sec_type: "STK"
    currency: "GBP"
    description: "iShares Core MSCI Europe UCITS ETF"

  # European Value (overweight old economy) - UCITS compliant
  value_ewu:
    symbol: "IUKD"
    exchange: "LSE"
    sec_type: "STK"
    currency: "GBP"
    description: "iShares UK Dividend UCITS ETF"

  value_ewg:
    symbol: "EXS1"
    exchange: "XETRA"
    sec_type: "STK"
    currency: "EUR"
    description: "iShares Core DAX UCITS ETF"

credit_us:
  # Investment Grade - UCITS compliant
  ig_lqd:
    symbol: "LQDE"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    description: "iShares $ Corp Bond UCITS ETF"

  # High Yield - UCITS compliant
  hy_hyg:
    symbol: "IHYU"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    description: "iShares $ High Yield Corp Bond UCITS ETF"

  hy_jnk:
    symbol: "HYLD"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    description: "iShares $ High Yield Corp Bond ESG UCITS ETF"

  # Loans/BDCs - Using stocks (no KID required for individual stocks)
  loans_bkln:
    symbol: "FLOT"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    description: "iShares $ Floating Rate Bond UCITS ETF"

  loans_srln:
    symbol: "FLOA"
    exchange: "LSE"
    sec_type: "STK"
    currency: "USD"
    description: "iShares $ Ultrashort Bond UCITS ETF"

  # BDCs - These are individual stocks (no KID required)
  bdc_arcc:
    symbol: "ARCC"
    exchange: "SMART"           # Use SMART routing to avoid IBKR precautionary rejection
    primary_exchange: "NASDAQ"
    sec_type: "STK"
    currency: "USD"
    description: "Ares Capital Corporation"

  bdc_main:
    symbol: "MAIN"
    exchange: "NYSE"
    sec_type: "STK"
    currency: "USD"
    description: "Main Street Capital Corporation"

credit_eu:
  # European Investment Grade
  ig_ieac:
    symbol: "IEAC"
    exchange: "LSE"
    sec_type: "STK"
    currency: "GBP"
    description: "iShares Core EUR Corp Bond UCITS ETF"

  # European High Yield
  hy_ihyg:
    symbol: "IHYG"
    exchange: "LSE"
    sec_type: "STK"
    currency: "GBP"
    description: "iShares EUR High Yield Corp Bond UCITS ETF"

options:
  # S&P 500 Options
  spx_index:
    underlying: "SPX"
    exchange: "CBOE"
    sec_type: "OPT"
    currency: "USD"
    multiplier: 100.0
    description: "S&P 500 Index Options"

  spy_etf:
    underlying: "SPY"
    exchange: "ARCA"
    sec_type: "OPT"
    currency: "USD"
    multiplier: 100.0
    description: "SPY ETF Options"

  # Euro STOXX Options
  sx5e_index:
    underlying: "SX5E"
    exchange: "EUREX"
    sec_type: "OPT"
    currency: "EUR"
    multiplier: 10.0
    description: "Euro STOXX 50 Index Options"

  fez_etf:
    underlying: "FEZ"
    exchange: "ARCA"
    sec_type: "OPT"
    currency: "USD"
    multiplier: 100.0
    description: "FEZ ETF Options"

  # VIX Options
  vix_index:
    underlying: "VIX"
    exchange: "CBOE"
    sec_type: "OPT"
    currency: "USD"
    multiplier: 100.0
    description: "VIX Index Options"

  # Credit Options
  hyg_etf:
    underlying: "HYG"
    exchange: "ARCA"
    sec_type: "OPT"
    currency: "USD"
    multiplier: 100.0
    description: "HYG ETF Options"

  jnk_etf:
    underlying: "JNK"
    exchange: "ARCA"
    sec_type: "OPT"
    currency: "USD"
    multiplier: 100.0
    description: "JNK ETF Options"

sovereign_futures:
  # French OAT (10Y)
  france_oat:
    symbol: "FOAT"
    exchange: "EUREX"
    sec_type: "FUT"
    currency: "EUR"
    multiplier: 1000.0
    description: "French Government Bond Future (OAT)"

  # German Bund (10Y)
  germany_bund:
    symbol: "FGBL"
    exchange: "EUREX"
    sec_type: "FUT"
    currency: "EUR"
    multiplier: 1000.0
    description: "Euro-Bund Future"

  # Italian BTP
  italy_btp:
    symbol: "FBTP"
    exchange: "EUREX"
    sec_type: "FUT"
    currency: "EUR"
    multiplier: 1000.0
    description: "Italian Government Bond Future (BTP)"

french_equities:
  # French Banks
  bnp_paribas:
    symbol: "BNP"
    exchange: "SBF"
    sec_type: "STK"
    currency: "EUR"
    description: "BNP Paribas"

  societe_generale:
    symbol: "GLE"
    exchange: "SBF"
    sec_type: "STK"
    currency: "EUR"
    description: "Societe Generale"

  credit_agricole:
    symbol: "ACA"
    exchange: "SBF"
    sec_type: "STK"
    currency: "EUR"
    description: "Credit Agricole"

  # CAC 40 Future
  cac_future:
    symbol: "FCE"
    exchange: "MONEP"
    sec_type: "FUT"
    currency: "EUR"
    multiplier: 10.0
    description: "CAC 40 Index Future"

volatility:
  # VIX Future
  vix_future:
    symbol: "VX"
    exchange: "CFE"
    sec_type: "FUT"
    currency: "USD"
    multiplier: 1000.0
    description: "CBOE Volatility Index Future"

  # VIX Mini Future (more accessible sizing)
  vix_mini_future:
    symbol: "VXM"
    exchange: "CFE"
    sec_type: "FUT"
    currency: "USD"
    multiplier: 100.0
    description: "Mini VIX Future"

  # VSTOXX Future - PRIMARY for Europe insurance
  vstoxx_future:
    symbol: "FVS"
    exchange: "EUREX"
    sec_type: "FUT"
    currency: "EUR"
    multiplier: 100.0
    description: "VSTOXX Mini Future"

  # VSTOXX Options on Futures (OVS2) - PRIMARY for vol convexity
  # Contract specs: EUR 100 per volatility point, European-style
  # Based on VSTOXX futures (FVS), NOT the V2X index directly
  # Strike intervals: 0.5 vol points (near), 1.0 vol points (far)
  # Expiries: Weekly, Monthly (aligned with FVS)
  # Key feature: Options expire into futures, not cash
  vstoxx_option:
    underlying: "FVS"
    exchange: "EUREX"
    sec_type: "FOP"
    currency: "EUR"
    multiplier: 100.0
    tick_size: 0.05
    min_tick_value: 5.0
    settlement: "physical"  # Settles into futures
    style: "european"
    description: "VSTOXX Future Options (OVS2)"
    ibkr_symbol: "V2X"
    primary_exchange: "DTB"
    # Typical DTE: 30-90 days
    # Preferred structures: Call spreads (buy +5pt OTM, sell +15pt)

# Option hedge placeholders - used by TailHedgeManager for abstract option orders
# These are resolved to underlying prices for sizing calculations
# NOTE: These are NOT tradeable directly - option trading requires proper contract specs
# TODO: Implement proper option contract factory to convert placeholders to real options
option_hedges:
  vstoxx_call:
    symbol: "FVS"               # VSTOXX Mini Futures (underlying for pricing)
    exchange: "EUREX"
    sec_type: "FUT"             # Get future price for option sizing
    currency: "EUR"
    multiplier: 100.0
    underlying_index: "V2X"
    option_type: "CALL"
    tradeable: false            # Placeholder only - skip during execution
    description: "VSTOXX Call Option placeholder - prices via FVS futures"

  sx5e_put:
    symbol: "ESTX50"            # Euro STOXX 50 Index
    exchange: "EUREX"
    sec_type: "IND"             # Index for pricing
    currency: "EUR"
    multiplier: 10.0
    underlying_index: "SX5E"
    option_type: "PUT"
    tradeable: false            # Placeholder only - skip during execution
    description: "SX5E Put Option placeholder - prices via Euro STOXX 50 index"

  vix_call:
    symbol: "VIX"               # VIX Index
    exchange: "CBOE"
    sec_type: "IND"             # Index for pricing
    currency: "USD"
    multiplier: 100.0
    underlying_index: "VIX"
    option_type: "CALL"
    tradeable: false            # Placeholder only - skip during execution
    description: "VIX Call Option placeholder - prices via VIX index"

  eu_bank_put:
    symbol: "SX7E"              # Euro STOXX Banks Index
    exchange: "EUREX"
    sec_type: "IND"             # Index for pricing
    currency: "EUR"
    multiplier: 10.0
    underlying_index: "SX7E"
    option_type: "PUT"
    tradeable: false            # Placeholder only - skip during execution
    description: "EU Banks Put Option placeholder - prices via SX7E index"

  hyg_put:
    symbol: "HYG"               # iShares High Yield Corporate Bond ETF
    exchange: "SMART"
    sec_type: "STK"             # ETF for pricing
    currency: "USD"
    multiplier: 100.0
    underlying_index: "HYG"
    option_type: "PUT"
    tradeable: false            # Placeholder only - skip during execution
    description: "HYG Put Option placeholder - prices via HYG ETF"

europe_vol_structures:
  # EURO STOXX 50 Options (OESX) - PRIMARY for Europe insurance puts
  # Contract specs: EUR 10 per index point, European-style, cash-settled
  # Strike intervals: 25 points (near), 50 points (far)
  # Expiries: Weekly (Fri), Monthly (3rd Fri), Quarterly
  sx5e_option:
    underlying: "SX5E"
    exchange: "EUREX"
    sec_type: "OPT"
    currency: "EUR"
    multiplier: 10.0
    tick_size: 0.1
    min_tick_value: 1.0
    settlement: "cash"
    style: "european"
    description: "Euro STOXX 50 Index Options (OESX)"
    ibkr_symbol: "ESTX50"
    primary_exchange: "DTB"

  # EURO STOXX 50 Mini Options (smaller notional)
  sx5e_mini_option:
    underlying: "OXXP"
    exchange: "EUREX"
    sec_type: "OPT"
    currency: "EUR"
    multiplier: 1.0
    description: "Euro STOXX 50 Mini Options"

  # DAX Options - German market stress
  dax_option:
    underlying: "DAX"
    exchange: "EUREX"
    sec_type: "OPT"
    currency: "EUR"
    multiplier: 5.0
    description: "DAX Index Options"

  # Euro STOXX Banks Options - EU financial stress
  sx7e_option:
    underlying: "SX7E"
    exchange: "EUREX"
    sec_type: "OPT"
    currency: "EUR"
    multiplier: 10.0
    description: "Euro STOXX Banks Index Options"

# Single Stock Universe for Systematic L/S
single_stocks:
  us_long_candidates:
    - AAPL
    - MSFT
    - GOOGL
    - AMZN
    - NVDA
    - META
    - TSLA
    - UNH
    - JNJ
    - V
    - MA
    - HD
    - PG
    - COST
    - ABBV
    - LLY
    - MRK
    - CRM
    - ADBE
    - AMD
    - AVGO
    - ORCL
    - NFLX
    - INTC
    - CSCO

  eu_short_candidates:
    - VOW3.DE    # Volkswagen
    - BMW.DE    # BMW
    - DAI.DE    # Mercedes-Benz
    - BAS.DE    # BASF
    - SIE.DE    # Siemens
    - DTE.DE    # Deutsche Telekom
    - DBK.DE    # Deutsche Bank
    - EOAN.DE   # E.ON
    - RWE.DE    # RWE
    - HEN3.DE   # Henkel
    - FRE.DE    # Fresenius
    - BNP.PA    # BNP Paribas
    - SAN.PA    # Sanofi
    - AIR.PA    # Airbus
    - OR.PA     # L'Oreal
    - MC.PA     # LVMH
    - TTE.PA    # TotalEnergies
    - SU.PA     # Schneider Electric
    - AI.PA     # Air Liquide
    - CS.PA     # AXA

# Factor-Neutral Sector Pairs
# Same-sector US vs EU pairs to isolate regional beta
# Key insight: US Tech vs EU Banks = regional + growth/value + duration + sector
# Same-sector pairs (US Banks vs EU Banks) = pure regional bet
sector_pairs:
  # Financials - beta-matched banking exposure
  financials:
    us:
      symbol: "XLF"
      exchange: "ARCA"
      sec_type: "STK"
      currency: "USD"
      beta: 1.1
      growth_exposure: -0.2
      value_exposure: 0.3
      description: "Financial Select Sector SPDR"
    eu:
      symbol: "EXV1"
      exchange: "XETRA"
      sec_type: "STK"
      currency: "EUR"
      beta: 1.4
      growth_exposure: -0.4
      value_exposure: 0.5
      description: "iShares STOXX Europe 600 Banks"

  # Technology - growth-neutral tech exposure
  technology:
    us:
      symbol: "XLK"
      exchange: "ARCA"
      sec_type: "STK"
      currency: "USD"
      beta: 1.2
      growth_exposure: 0.6
      value_exposure: -0.3
      description: "Technology Select Sector SPDR"
    eu:
      symbol: "EXV3"
      exchange: "XETRA"
      sec_type: "STK"
      currency: "EUR"
      beta: 1.1
      growth_exposure: 0.4
      value_exposure: -0.2
      description: "iShares STOXX Europe 600 Technology"

  # Industrials - cyclical exposure matched
  industrials:
    us:
      symbol: "XLI"
      exchange: "ARCA"
      sec_type: "STK"
      currency: "USD"
      beta: 1.15
      growth_exposure: 0.1
      value_exposure: 0.1
      description: "Industrial Select Sector SPDR"
    eu:
      symbol: "EXH1"
      exchange: "XETRA"
      sec_type: "STK"
      currency: "EUR"
      beta: 1.2
      growth_exposure: 0.0
      value_exposure: 0.2
      description: "iShares STOXX Europe 600 Industrial Goods"

  # Healthcare - defensive exposure matched
  healthcare:
    us:
      symbol: "XLV"
      exchange: "ARCA"
      sec_type: "STK"
      currency: "USD"
      beta: 0.85
      growth_exposure: 0.2
      value_exposure: 0.1
      description: "Health Care Select Sector SPDR"
    eu:
      symbol: "EXV4"
      exchange: "XETRA"
      sec_type: "STK"
      currency: "EUR"
      beta: 0.8
      growth_exposure: 0.1
      value_exposure: 0.2
      description: "iShares STOXX Europe 600 Health Care"

  # Energy - commodity exposure matched
  energy:
    us:
      symbol: "XLE"
      exchange: "ARCA"
      sec_type: "STK"
      currency: "USD"
      beta: 1.3
      growth_exposure: -0.3
      value_exposure: 0.4
      description: "Energy Select Sector SPDR"
    eu:
      symbol: "EXH2"
      exchange: "XETRA"
      sec_type: "STK"
      currency: "EUR"
      beta: 1.2
      growth_exposure: -0.3
      value_exposure: 0.4
      description: "iShares STOXX Europe 600 Oil & Gas"

  # Utilities - yield-matched defensive
  utilities:
    us:
      symbol: "XLU"
      exchange: "ARCA"
      sec_type: "STK"
      currency: "USD"
      beta: 0.6
      growth_exposure: -0.2
      value_exposure: 0.3
      description: "Utilities Select Sector SPDR"
    eu:
      symbol: "EXH9"
      exchange: "XETRA"
      sec_type: "STK"
      currency: "EUR"
      beta: 0.7
      growth_exposure: -0.2
      value_exposure: 0.3
      description: "iShares STOXX Europe 600 Utilities"
