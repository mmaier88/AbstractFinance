# Staging-specific overrides
# Staging monitors and auto-restarts Production
services:
  cross-monitor:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: cross-monitor
    restart: always
    environment:
      - MONITOR_TARGET_URL=http://91.99.116.196:8080/health
      - MONITOR_TARGET_HOST=91.99.116.196
      - MONITOR_TARGET_NAME=AbstractFinance-prod
      - MONITOR_INTERVAL=60
      - FAILURES_BEFORE_RESTART=3
      - RESTART_COOLDOWN=300
    volumes:
      - /root/.ssh:/root/.ssh:ro
    command: ["python", "-m", "scripts.cross_monitor"]
    networks:
      - trading-network
